(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1261],{46601:function(){},23653:function(e,a,t){"use strict";t.d(a,{l:function(){return getTokens}});var n=t(72009);let getTokens=function(e){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return n.iK[e].map(e=>({symbol:e.assetTokenSymbol,address:e.assetTokenAddress})).concat(n.iK[e].map(e=>({symbol:e.xTokenSymbol,address:e.xTokenAddress}))).concat([{symbol:"USB",address:n.O1[e]}]).filter(e=>!a||"ETH"!==e.symbol)}},8580:function(e,a,t){"use strict";t.d(a,{Hj:function(){return s},Pq:function(){return r},pn:function(){return o},v:function(){return n},xb:function(){return l}});let n="https://twitter.com/WandProtocol",s="https://discord.gg/fy6A7JCE5N",l="https://docs.wand.fi",r=BigInt(1e18),o=864e5},23862:function(e,a,t){"use strict";t.d(a,{b:function(){return useMemoOfChainId}});var n=t(2265),s=t(14389);function useMemoOfChainId(e){let a=(0,s.p)(),t=(0,n.useRef)({});return(0,n.useMemo)(()=>(t.current[a]||(t.current[a]=e()),t.current[a]),[a])}},68497:function(e,a,t){"use strict";t.d(a,{g:function(){return Y},A:function(){return FetcherProvider}});var n=t(57437),s=t(34873),l=t(72009),r=t(23653),o=t(8580),u=t(14389),d=t(2265),i=t(56926),c=t(32699),b=t(93362),m=t(91056),p=t(23862),f=t(54415),v=t(81628),k=t(24033),h=t(21693),S=t(16775),T=t(84661);let Y=(0,d.createContext)({balances:(0,v.Yb)({},0n),totalSupplies:(0,v.Yb)({},0n),prices:(0,v.Yb)({},0n),assetLocked:(0,v.Yb)({},0n),aar:(0,v.Yb)({},0),vaultUSBTotal:(0,v.Yb)({},0n),vaultsMode:(0,v.Yb)({},0),vaultsDiscount:(0,v.Yb)({},!1),vaultsState:(0,v.Yb)({},(0,v.Yb)({},0n)),stableVaultsState:(0,v.Yb)({},(0,v.Yb)({},0n)),earns:(0,v.Yb)({},0n),usbApr:{apr:0n,aprDecimals:10}}),FetcherProvider=e=>{let{children:a}=e,t=(0,k.usePathname)(),A="/"!=t,g=(0,u.p)();!function(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,i.t_)({chainId:e});d.useMemo(()=>{let e=function(e){var a,t;let{chain:n,transport:s}=e,l={chainId:n.id,name:n.name,ensAddress:null===(t=n.contracts)||void 0===t?void 0:null===(a=t.ensRegistry)||void 0===a?void 0:a.address};return"fallback"===s.type?new c.H(s.transports.map(e=>{let{value:a}=e;return new b.r(null==a?void 0:a.url,l)})):new b.r(s.url,l)}(a);return m.ON.provider=e,e},[a])}();let{address:y}=(0,i.mA)(),{data:M}=(0,i.KQ)({address:y,watch:!0,enabled:!!y&&A,chainId:g}),w=(0,d.useMemo)(()=>(0,r.l)(g),[g]),N=(0,d.useMemo)(()=>({contracts:[...w.map(e=>({address:e.address,abi:T.em,functionName:"balanceOf",args:[y],chainId:g})),...w.map(e=>({address:e.address,abi:T.em,functionName:"totalSupply",chainId:g}))],watch:!0,enabled:A,allowFailure:!0}),[w,y,A]),{data:B}=(0,f.uX)(N),P=w.length,_=(0,p.b)(()=>(0,v.Yb)({},0n));_[l.K8]=(null==M?void 0:M.value)||0n,w.forEach((e,a)=>{_[e.address]=(0,v.ok)(B,[a,"result"])});let U=(0,p.b)(()=>(0,v.Yb)({},0n));w.forEach((e,a)=>{U[e.address]=(0,v.ok)(B,[a+P,"result"])});let W=l.iK[g],C=function(){let e=(0,k.usePathname)(),a="/"!=e,t=(0,u.p)(),n=l.iK[t],{data:r}=(0,f.uX)({watch:!0,enabled:a,contracts:[...n.map(e=>({vc:e,abi:s.nq,address:e.assetTokenFeed,functionName:"latestPrice"}))]}),{data:i}=(0,f.uX)({watch:!0,cacheTime:o.pn,enabled:a,contracts:[...n.map(e=>({abi:s.nq,address:e.assetTokenFeed,functionName:"decimals"}))]});return(0,d.useMemo)(()=>{let e={};return n.forEach((a,t)=>{let n=(0,v.ok)(r,[t,"result"]),s=(0,v.ok)(i,[t,"result"]);e[a.assetTokenAddress]=[n,s]}),e},[r,i,n])}(),E=(0,d.useMemo)(()=>({watch:!0,enabled:A,contracts:[...W.map(e=>({vc:e,abi:s.WW,address:e.vault,functionName:"assetBalance"}))]}),[W,A]),{data:D}=(0,f.uX)(E),X=(0,d.useMemo)(()=>({watch:!0,enabled:A,contracts:[...W.map(e=>({abi:s.WW,address:e.vault,functionName:"usbTotalSupply"}))]}),[A,W]),{data:x}=(0,f.uX)(X),I=(0,d.useMemo)(()=>({watch:!0,enabled:A,contracts:[...W.map(e=>({vc:e,abi:s.Wn,address:l.O6[g],functionName:"AAR",args:[e.vault]}))]}),[A,W]),{data:K}=(0,f.uX)(I),O=(0,d.useMemo)(()=>({cacheTime:o.pn,enabled:A,contracts:[...W.map(e=>({abi:s.WW,address:e.vault,functionName:"AARDecimals"}))]}),[A,W]),{data:q}=(0,f.uX)(O),F=(0,d.useMemo)(()=>({watch:!0,enabled:A,contracts:[...W.map(e=>({abi:s.WW,address:e.vault,functionName:"vaultMode"}))]}),[A,W]),{data:R}=(0,f.uX)(F),H=(0,d.useMemo)(()=>({watch:!0,enabled:A,contracts:[...W.map(e=>({vc:e,abi:s.Wn,address:l.O6[g],functionName:e.isStable?"getStableVaultState":"getVaultState",args:[e.vault]}))]}),[A,W]),{data:V}=(0,f.uX)(H),j=(0,d.useMemo)(()=>({cacheTime:o.pn,enabled:A,contracts:[...W.map(e=>({vc:e,abi:s.WW,address:e.vault,functionName:"paramValue",args:[(0,h.$G)("Y",{size:32})]}))]}),[A,W]),{data:z}=(0,f.uX)(j),G=(0,p.b)(()=>(0,v.Yb)({[l.O1[g]]:o.Pq},0n)),L=(0,p.b)(()=>(0,v.Yb)({},0n)),$=(0,p.b)(()=>(0,v.Yb)({},0n)),J=(0,p.b)(()=>(0,v.Yb)({},0n)),Q=(0,p.b)(()=>(0,v.Yb)({},0)),Z=(0,p.b)(()=>(0,v.Yb)({},(0,v.Yb)({},0n))),ee=(0,p.b)(()=>(0,v.Yb)({},(0,v.Yb)({},0n))),ea=function(e,a,t){let n=(0,p.b)(()=>(0,v.Yb)({},!1)),r=(0,u.p)(),o=l.iK[r],{data:d}=(0,f.uX)({contracts:o.map(e=>({vc:e,abi:s.WW,address:e.vault,functionName:"paramValue",args:[(0,h.$G)("CircuitBreakPeriod",{size:32})]}))});return o.forEach((s,l)=>{if(s.isStable){let e=a[(null==s?void 0:s.vault)||"null"];n[s.vault]=e&&e.M_USDCx>0n&&e.aar<e.AARS}else{let a=(0,v.ok)(d,[l,"result"]),r=e[(null==s?void 0:s.vault)||"null"],o=t[(null==s?void 0:s.vault)||"null"],u=(0,v.ok)(r,"AARBelowCircuitBreakerLineTime"),i=2==o&&r&&((0,v.ok)(r,"aar")>=(0,v.ok)(r,"AARC")||BigInt(new Date().getTime()/1e3)-u>=a);n[s.vault]=i}}),n}(Z,ee,Q);W.forEach((e,a)=>{var t,n,s;let r=(0,v.ok)(D,[a,"result"]),u=(0,v.ok)(x,[a,"result"]),d=(0,v.ok)(C[e.assetTokenAddress],[0]),i=(0,v.ok)(C[e.assetTokenAddress],[1]);J[e.vault]=u;let c=i>0n?d*o.Pq/10n**i:0n;G[e.assetTokenAddress]=c;let b=U[e.xTokenAddress],m=b>0n&&r>0n&&c>0n&&u>0n&&r*c>u*o.Pq?(r*c-u*o.Pq)/b:0n;b>0n&&r>0n&&c>0n&&u>0n&&r*c<u*o.Pq&&(G[l.O1[g]]=r*c/u),G[e.xTokenAddress]=m,L[e.assetTokenAddress]=r;let p=(0,S.b)((0,v.ok)(K,[a,"result"]),parseInt((0,v.ok)(q,[a,"result"]).toString()));$[e.vault]=parseFloat(p),e.isStable?ee[e.vault]=(0,v.Yb)({settingsDecimals:10n,...null==V?void 0:null===(n=V[a])||void 0===n?void 0:n.result,Y:(0,v.ok)(z,[a,"result"])},0n):Z[e.vault]=(0,v.Yb)({settingsDecimals:10n,...null==V?void 0:null===(s=V[a])||void 0===s?void 0:s.result,Y:(0,v.ok)(z,[a,"result"])},0n);let f=ee[e.vault];Q[e.vault]=e.isStable?f.aar<f.AARS&&f.M_USDC>0n?2:1:(null==R?void 0:null===(t=R[a])||void 0===t?void 0:t.result)||0});let et=function(){let{address:e}=(0,i.mA)(),a=(0,k.usePathname)(),t=(0,u.p)(),n=(0,d.useMemo)(()=>l.iK[t].filter(e=>!e.isStable&&e.ptyPoolAboveAddress&&e.ptyPoolBelowAddress).map(e=>[{poolAddress:e.ptyPoolBelowAddress,stakeSymbol:"USB",matchSymbol:e.assetTokenSymbol,earnSymbol:e.xTokenSymbol,earnForMatchSymbol:e.assetTokenSymbol},{poolAddress:e.ptyPoolAboveAddress,stakeSymbol:e.assetTokenSymbol,matchSymbol:"USB",earnSymbol:e.assetTokenSymbol,earnForMatchSymbol:e.xTokenSymbol}]).flat(),[t]),{data:r}=(0,f.uX)({watch:!0,enabled:"/earn"==a,contracts:[...n.map(a=>{let{poolAddress:t}=a;return{abi:s.aT,address:t,functionName:"userStakingBalance",args:[e]}}),...n.map(a=>{let{poolAddress:t}=a;return{abi:s.aT,address:t,functionName:"earnedMatchedToken",args:[e]}}),...n.map(a=>{let{poolAddress:t}=a;return{abi:s.aT,address:t,functionName:"earnedStakingYields",args:[e]}}),...n.map(a=>{let{poolAddress:t}=a;return{abi:s.aT,address:t,functionName:"earnedMatchingYields",args:[e]}}),...n.map(e=>{let{poolAddress:a}=e;return{abi:s.aT,address:a,functionName:"totalStakingBalance"}})]}),o=(0,p.b)(()=>(0,v.Yb)({},(0,v.Yb)({},0n)));return n.forEach((e,a)=>{let{poolAddress:t,stakeSymbol:s,matchSymbol:l,earnSymbol:u}=e,d=(0,v.ok)(r,[a,"result"]),i=(0,v.ok)(r,[a+n.length,"result"]),c=(0,v.ok)(r,[a+2*n.length,"result"]),b=(0,v.ok)(r,[a+3*n.length,"result"]),m=(0,v.ok)(r,[a+4*n.length,"result"]);o[t]={stakeSymbol:s,matchSymbol:l,earnSymbol:u,stake:d,match:i,earn:c,earnForMatch:b,totalStake:m}}),o}(),en=function(e,a){let t=(0,u.p)(),n=0,s=0n,r=0n;return l.iK[t].forEach(t=>{if(t.isStable){let e=a[t.vault];s+=e.M_USB_USDC*e.Y,r+=e.M_USB_USDC,e.M_USB_USDC>0n&&e.Y>0n&&n++}else{let a=e[t.vault];s+=a.M_USB_ETH*a.Y,r+=a.M_USB_ETH,a.M_USB_ETH>0n&&a.Y>0n&&n++}}),{apr:r>0n?s/r:0n,aprDecimals:10}}(Z,ee);return(0,n.jsx)(Y.Provider,{value:{balances:_,totalSupplies:U,prices:G,assetLocked:L,aar:$,vaultUSBTotal:J,vaultsMode:Q,vaultsDiscount:ea,vaultsState:Z,stableVaultsState:ee,earns:et,usbApr:en},children:a})}}}]);