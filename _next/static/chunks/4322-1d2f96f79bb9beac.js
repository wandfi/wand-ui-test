(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4322],{46601:function(){},8580:function(e,t,a){"use strict";a.d(t,{Hj:function(){return o},Pq:function(){return r},pn:function(){return l},v:function(){return n},xb:function(){return s}});let n="https://twitter.com/WandProtocol",o="https://discord.gg/fy6A7JCE5N",s="https://docs.wand.fi",r=BigInt(1e18),l=864e5},15898:function(e,t,a){"use strict";a.d(t,{g:function(){return v},A:function(){return FetcherProvider}});var n=a(57437),o=a(84486),s=a(91056),r=a(72009);let getTokens=()=>r.iK[(0,s.BV)()].map(e=>({symbol:e.assetTokenSymbol,address:e.assetTokenAddress})).concat(r.iK[(0,s.BV)()].map(e=>({symbol:e.xTokenSymbol,address:e.xTokenAddress}))).concat([{symbol:"USB",address:r.O1[(0,s.BV)()]}]).filter(e=>"ETH"!==e.symbol);var l=a(8580),u=a(2265),d=a(56926),i=a(32699),c=a(93362),m=a(54415),p=a(81628),f=a(24033),b=a(21693),y=a(16775),k=a(84661);function proxyGetDef(e,t){return new Proxy(e,{get:function(e,a){return a in e&&null!==e[a]&&void 0!==e[a]?e[a]:t}})}let v=(0,u.createContext)({balances:proxyGetDef({},0n),totalSupplies:proxyGetDef({},0n),prices:proxyGetDef({},0n),assetLocked:proxyGetDef({},0n),aar:proxyGetDef({},0),vaultUSBTotal:proxyGetDef({},0n),vaultsMode:proxyGetDef({},0),vaultsDiscount:proxyGetDef({},!1),vaultsState:proxyGetDef({},proxyGetDef({},0n)),stableVaultsState:proxyGetDef({},proxyGetDef({},0n)),earns:proxyGetDef({},0n)}),FetcherProvider=e=>{let{children:t}=e,a=(0,f.usePathname)(),h="/"!=a,x=(0,d.xx)();(0,s.rv)(x),function(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,d.t_)({chainId:e});u.useMemo(()=>{let e=function(e){var t,a;let{chain:n,transport:o}=e,s={chainId:n.id,name:n.name,ensAddress:null===(a=n.contracts)||void 0===a?void 0:null===(t=a.ensRegistry)||void 0===t?void 0:t.address};return"fallback"===o.type?new i.H(o.transports.map(e=>{let{value:t}=e;return new c.r(null==t?void 0:t.url,s)})):new c.r(o.url,s)}(t);return s.ON.provider=e,e},[t])}();let S=(0,s.BV)(),{address:D}=(0,d.mA)(),{data:T}=(0,d.KQ)({address:D,watch:!0,enabled:!!D&&h,chainId:(0,s.BV)()}),g=(0,u.useMemo)(()=>getTokens(),[(0,s.BV)()]),A=(0,u.useMemo)(()=>({contracts:[...g.map(e=>({address:e.address,abi:k.em,functionName:"balanceOf",args:[D],chainId:(0,s.BV)()})),...g.map(e=>({address:e.address,abi:k.em,functionName:"totalSupply",chainId:(0,s.BV)()}))],watch:!0,enabled:!!D&&h,allowFailure:!0}),[g,D,h]),{data:G}=(0,m.uX)(A),M=g.length,B=(0,u.useMemo)(()=>proxyGetDef({},0n),[]);B[r.K8]=(null==T?void 0:T.value)||0n,g.forEach((e,t)=>{B[e.address]=(0,p.ok)(G,[t,"result"]),B[e.symbol]=(0,p.ok)(G,[t,"result"])});let w={};g.forEach((e,t)=>{w[e.address]=(0,p.ok)(G,[t+M,"result"]),w[e.symbol]=(0,p.ok)(G,[t+M,"result"])});let N=r.iK[S],P=function(){let e=(0,f.usePathname)(),t="/"!=e;(0,d.xx)();let a=r.iK[(0,s.BV)()],{data:n}=(0,m.uX)({watch:!0,enabled:t,contracts:[...a.map(e=>({vc:e,abi:o.nq,address:e.assetTokenFeed,functionName:"latestPrice"}))]}),{data:i}=(0,m.uX)({watch:!0,cacheTime:l.pn,enabled:t,contracts:[...a.map(e=>({abi:o.nq,address:e.assetTokenFeed,functionName:"decimals"}))]});return(0,u.useMemo)(()=>{let e={};return a.forEach((t,a)=>{let o=(0,p.ok)(n,[a,"result"]),s=(0,p.ok)(i,[a,"result"]);e[t.assetTokenAddress]=[o,s]}),e},[n,i,a])}(),V=(0,u.useMemo)(()=>({watch:!0,enabled:h,contracts:[...N.map(e=>({vc:e,abi:o.WW,address:e.vault,functionName:"assetBalance"}))]}),[N,h]),{data:W}=(0,m.uX)(V),X=(0,u.useMemo)(()=>({watch:!0,enabled:h,contracts:[...N.map(e=>({abi:o.WW,address:e.vault,functionName:"usbTotalSupply"}))]}),[h,N]),{data:E}=(0,m.uX)(X),q=(0,u.useMemo)(()=>({watch:!0,enabled:h,contracts:[...N.map(e=>({vc:e,abi:o.Wn,address:r.O6[S],functionName:"AAR",args:[e.vault]}))]}),[h,N]),{data:C}=(0,m.uX)(q),F=(0,u.useMemo)(()=>({cacheTime:l.pn,enabled:h,contracts:[...N.map(e=>({abi:o.WW,address:e.vault,functionName:"AARDecimals"}))]}),[h,N]),{data:K}=(0,m.uX)(F),I=(0,u.useMemo)(()=>({watch:!0,enabled:h,contracts:[...N.map(e=>({abi:o.WW,address:e.vault,functionName:"vaultMode"}))]}),[h,N]),{data:O}=(0,m.uX)(I),R=(0,u.useMemo)(()=>({watch:!0,enabled:h,contracts:[...N.map(e=>({vc:e,abi:o.Wn,address:r.O6[S],functionName:e.isStable?"getStableVaultState":"getVaultState",args:[e.vault]}))]}),[h,N]),{data:_}=(0,m.uX)(R),U=(0,u.useMemo)(()=>({cacheTime:l.pn,enabled:h,contracts:[...N.map(e=>({vc:e,abi:o.WW,address:e.vault,functionName:"paramValue",args:[(0,b.$G)("Y",{size:32})]}))]}),[h,N]),{data:Y}=(0,m.uX)(U),H=(0,u.useMemo)(()=>proxyGetDef({[r.O1[(0,s.BV)()]]:l.Pq},0n),[(0,s.BV)()]),j=(0,u.useMemo)(()=>proxyGetDef({},0n),[]),z=(0,u.useMemo)(()=>proxyGetDef({},0n),[]),L=(0,u.useMemo)(()=>proxyGetDef({},0n),[]),$=(0,u.useMemo)(()=>proxyGetDef({},0),[]),J=(0,u.useMemo)(()=>proxyGetDef({},proxyGetDef({},0n)),[]),Q=(0,u.useMemo)(()=>proxyGetDef({},proxyGetDef({},0n)),[]),Z=function(e,t,a){let n=(0,u.useMemo)(()=>proxyGetDef({},!1),[]);(0,d.xx)();let l=r.iK[(0,s.BV)()],{data:i}=(0,m.uX)({contracts:l.map(e=>({vc:e,abi:o.WW,address:e.vault,functionName:"paramValue",args:[(0,b.$G)("CircuitBreakPeriod",{size:32})]}))});return l.forEach((o,s)=>{if(o.isStable){let e=t[(null==o?void 0:o.vault)||"null"];n[o.vault]=e&&e.M_USDCx>0n&&e.aar<e.AARS}else{let t=(0,p.ok)(i,[s,"result"]),r=e[(null==o?void 0:o.vault)||"null"],l=a[(null==o?void 0:o.vault)||"null"],u=(0,p.ok)(r,"AARBelowCircuitBreakerLineTime"),d=2==l&&r&&((0,p.ok)(r,"aar")>=(0,p.ok)(r,"AARC")||BigInt(new Date().getTime()/1e3)-u>=t);n[o.vault]=d}}),n}(J,Q,$);N.forEach((e,t)=>{var a,n,o;let s=(0,p.ok)(W,[t,"result"]),r=(0,p.ok)(E,[t,"result"]),u=(0,p.ok)(P[e.assetTokenAddress],[0]),d=(0,p.ok)(P[e.assetTokenAddress],[1]);L[e.vault]=r;let i=d>0n?u*l.Pq/10n**d:0n;H[e.assetTokenAddress]=i;let c=(0,p.ok)(w,e.xTokenSymbol),m=c>0n&&s>0n&&i>0n&&r>0n&&s*i>r*l.Pq?(s*i-r*l.Pq)/c:0n;c>0n&&s>0n&&i>0n&&r>0n&&l.Pq,H[e.xTokenAddress]=m,j[e.assetTokenAddress]=s;let f=(0,y.b)((0,p.ok)(C,[t,"result"]),parseInt((0,p.ok)(K,[t,"result"]).toString()));z[e.vault]=parseFloat(f),$[e.vault]=(null==O?void 0:null===(a=O[t])||void 0===a?void 0:a.result)||0,e.isStable?Q[e.vault]=proxyGetDef({settingsDecimals:10n,...null==_?void 0:null===(n=_[t])||void 0===n?void 0:n.result,Y:(0,p.ok)(Y,[t,"result"])},0n):J[e.vault]=proxyGetDef({settingsDecimals:10n,...null==_?void 0:null===(o=_[t])||void 0===o?void 0:o.result,Y:(0,p.ok)(Y,[t,"result"])},0n)});let ee=function(){let{address:e}=(0,d.mA)(),t=(0,f.usePathname)(),a=r.iK[(0,s.BV)()],n=(0,u.useMemo)(()=>a.filter(e=>!e.isStable&&e.ptyPoolAboveAddress&&e.ptyPoolBelowAddress).map(e=>[{poolAddress:e.ptyPoolBelowAddress,stakeSymbol:"USB",matchSymbol:e.assetTokenSymbol,earnSymbol:e.xTokenSymbol,earnForMatchSymbol:e.assetTokenSymbol},{poolAddress:e.ptyPoolAboveAddress,stakeSymbol:e.assetTokenSymbol,matchSymbol:"USB",earnSymbol:e.assetTokenSymbol,earnForMatchSymbol:e.xTokenSymbol}]).flat(),a),{data:l}=(0,m.uX)({watch:!0,enabled:!!e&&"/earn"==t,contracts:[...n.map(t=>{let{poolAddress:a}=t;return{abi:o.aT,address:a,functionName:"userStakingBalance",args:[e]}}),...n.map(t=>{let{poolAddress:a}=t;return{abi:o.aT,address:a,functionName:"earnedMatchedToken",args:[e]}}),...n.map(t=>{let{poolAddress:a}=t;return{abi:o.aT,address:a,functionName:"earnedStakingYields",args:[e]}}),...n.map(t=>{let{poolAddress:a}=t;return{abi:o.aT,address:a,functionName:"earnedMatchingYields",args:[e]}}),...n.map(e=>{let{poolAddress:t}=e;return{abi:o.aT,address:t,functionName:"totalStakingBalance"}})]}),i=(0,u.useMemo)(()=>proxyGetDef({},proxyGetDef({},0n)),[]);return n.forEach((e,t)=>{let{poolAddress:a,stakeSymbol:o,matchSymbol:s,earnSymbol:r}=e,u=(0,p.ok)(l,[t,"result"]),d=(0,p.ok)(l,[t+n.length,"result"]),c=(0,p.ok)(l,[t+2*n.length,"result"]),m=(0,p.ok)(l,[t+3*n.length,"result"]),f=(0,p.ok)(l,[t+4*n.length,"result"]);i[a]={stakeSymbol:o,matchSymbol:s,earnSymbol:r,stake:u,match:d,earn:c,earnForMatch:m,totalStake:f}}),i}();return(0,n.jsx)(v.Provider,{value:{balances:B,totalSupplies:w,prices:H,assetLocked:j,aar:z,vaultUSBTotal:L,vaultsMode:$,vaultsDiscount:Z,vaultsState:J,stableVaultsState:Q,earns:ee},children:t})}}}]);