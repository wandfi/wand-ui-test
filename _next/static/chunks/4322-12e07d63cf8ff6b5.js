(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4322],{46601:function(){},8580:function(e,t,a){"use strict";a.d(t,{Hj:function(){return o},Pq:function(){return l},pn:function(){return r},v:function(){return n},xb:function(){return s}});let n="https://twitter.com/WandProtocol",o="https://discord.gg/fy6A7JCE5N",s="https://docs.wand.fi",l=BigInt(1e18),r=864e5},15898:function(e,t,a){"use strict";a.d(t,{g:function(){return k},A:function(){return FetcherProvider}});var n=a(57437),o=a(84486),s=a(91056),l=a(72009);let getTokens=()=>l.iK[(0,s.BV)()].map(e=>({symbol:e.assetTokenSymbol,address:e.assetTokenAddress})).concat(l.iK[(0,s.BV)()].map(e=>({symbol:e.xTokenSymbol,address:e.xTokenAddress}))).concat([{symbol:"USB",address:l.O1[(0,s.BV)()]}]).filter(e=>"ETH"!==e.symbol);var r=a(8580),u=a(2265),d=a(56926),i=a(32699),c=a(93362),m=a(54415),b=a(81628),p=a(24033),f=a(21693),y=a(16775),v=a(84661);function proxyGetDef(e,t){return new Proxy(e,{get:function(e,a){return a in e&&null!==e[a]&&void 0!==e[a]?e[a]:t}})}let k=(0,u.createContext)({balances:proxyGetDef({},0n),totalSupplies:proxyGetDef({},0n),prices:proxyGetDef({},0n),assetLocked:proxyGetDef({},0n),aar:proxyGetDef({},0),vaultUSBTotal:proxyGetDef({},0n),vaultsMode:proxyGetDef({},0),vaultsDiscount:proxyGetDef({},!1),vaultsState:proxyGetDef({},proxyGetDef({},0n)),stableVaultsState:proxyGetDef({},proxyGetDef({},0n)),earns:proxyGetDef({},0n)}),FetcherProvider=e=>{let{children:t}=e,a=(0,p.usePathname)(),S="/"!=a,h=(0,d.xx)();(0,s.rv)(h),function(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,d.t_)({chainId:e});u.useMemo(()=>{let e=function(e){var t,a;let{chain:n,transport:o}=e,s={chainId:n.id,name:n.name,ensAddress:null===(a=n.contracts)||void 0===a?void 0:null===(t=a.ensRegistry)||void 0===t?void 0:t.address};return"fallback"===o.type?new i.H(o.transports.map(e=>{let{value:t}=e;return new c.r(null==t?void 0:t.url,s)})):new c.r(o.url,s)}(t);return s.ON.provider=e,e},[t])}();let x=(0,s.BV)(),{address:T}=(0,d.mA)(),{data:D}=(0,d.KQ)({address:T,watch:!0,enabled:!!T&&S,chainId:(0,s.BV)()}),g=(0,u.useMemo)(()=>getTokens(),[(0,s.BV)()]),G=(0,u.useMemo)(()=>({contracts:[...g.map(e=>({address:e.address,abi:v.em,functionName:"balanceOf",args:[T],chainId:(0,s.BV)()})),...g.map(e=>({address:e.address,abi:v.em,functionName:"totalSupply",chainId:(0,s.BV)()}))],watch:!0,enabled:!!T&&S,allowFailure:!0}),[g,T,S]),{data:M}=(0,m.uX)(G),B=g.length,A=(0,u.useMemo)(()=>null==M?void 0:M.filter((e,t)=>t<B).map((e,t)=>{var a;return{symbol:null===(a=g[t])||void 0===a?void 0:a.symbol,balance:(0,b.ok)(e,"result")}}),[M,g]),w=(0,u.useMemo)(()=>proxyGetDef({},0n),[]);w.ETH=(null==D?void 0:D.value)||0n,null==A||A.forEach(e=>{w[e.symbol]=e.balance});let N={};g.forEach((e,t)=>{N[e.symbol]=(0,b.ok)(M,[t+B,"result"])});let P=l.iK[x],V=function(){let e=(0,p.usePathname)(),t="/"!=e;(0,d.xx)();let a=l.iK[(0,s.BV)()],{data:n}=(0,m.uX)({watch:!0,enabled:t,contracts:[...a.map(e=>({vc:e,abi:o.nq,address:e.assetTokenFeed,functionName:"latestPrice"}))]}),{data:i}=(0,m.uX)({watch:!0,cacheTime:r.pn,enabled:t,contracts:[...a.map(e=>({abi:o.nq,address:e.assetTokenFeed,functionName:"decimals"}))]});return(0,u.useMemo)(()=>{let e={};return a.forEach((t,a)=>{let o=(0,b.ok)(n,[a,"result"]),s=(0,b.ok)(i,[a,"result"]);e[t.assetTokenSymbol]=[o,s]}),e},[n,i,a])}(),W=(0,u.useMemo)(()=>({watch:!0,enabled:S,contracts:[...P.map(e=>({vc:e,abi:o.WW,address:e.vault,functionName:"assetBalance"}))]}),[P,S]),{data:X}=(0,m.uX)(W),E=(0,u.useMemo)(()=>({watch:!0,enabled:S,contracts:[...P.map(e=>({abi:o.WW,address:e.vault,functionName:"usbTotalSupply"}))]}),[S,P]),{data:q}=(0,m.uX)(E),C=(0,u.useMemo)(()=>({watch:!0,enabled:S,contracts:[...P.map(e=>({vc:e,abi:o.Wn,address:l.O6[x],functionName:"AAR",args:[e.vault]}))]}),[S,P]),{data:F}=(0,m.uX)(C),I=(0,u.useMemo)(()=>({cacheTime:r.pn,enabled:S,contracts:[...P.map(e=>({abi:o.WW,address:e.vault,functionName:"AARDecimals"}))]}),[S,P]),{data:K}=(0,m.uX)(I),R=(0,u.useMemo)(()=>({watch:!0,enabled:S,contracts:[...P.map(e=>({abi:o.WW,address:e.vault,functionName:"vaultMode"}))]}),[S,P]),{data:U}=(0,m.uX)(R),_=(0,u.useMemo)(()=>({watch:!0,enabled:S,contracts:[...P.map(e=>({vc:e,abi:o.Wn,address:l.O6[x],functionName:e.isStable?"getStableVaultState":"getVaultState",args:[e.vault]}))]}),[S,P]),{data:O}=(0,m.uX)(_),Y=(0,u.useMemo)(()=>({cacheTime:r.pn,enabled:S,contracts:[...P.map(e=>({vc:e,abi:o.WW,address:e.vault,functionName:"paramValue",args:[(0,f.$G)("Y",{size:32})]}))]}),[S,P]),{data:H}=(0,m.uX)(Y),j=(0,u.useMemo)(()=>proxyGetDef({USB:r.Pq},0n),[]),z=(0,u.useMemo)(()=>proxyGetDef({},0n),[]),L=(0,u.useMemo)(()=>proxyGetDef({},0n),[]),$=(0,u.useMemo)(()=>proxyGetDef({},0n),[]),J=(0,u.useMemo)(()=>proxyGetDef({},0),[]),Q=(0,u.useMemo)(()=>proxyGetDef({},proxyGetDef({},0n)),[]),Z=(0,u.useMemo)(()=>proxyGetDef({},proxyGetDef({},0n)),[]),ee=function(e,t,a){let n=(0,u.useMemo)(()=>proxyGetDef({},!1),[]);(0,d.xx)();let r=l.iK[(0,s.BV)()],{data:i}=(0,m.uX)({contracts:r.map(e=>({vc:e,abi:o.WW,address:e.vault,functionName:"paramValue",args:[(0,f.$G)("CircuitBreakPeriod",{size:32})]}))});return r.forEach((o,s)=>{if(o.isStable){let e=t[(null==o?void 0:o.vault)||"null"];n[o.vault]=e&&e.M_USDCx>0n&&e.aar<e.AARS}else{let t=(0,b.ok)(i,[s,"result"]),l=e[(null==o?void 0:o.vault)||"null"],r=a[(null==o?void 0:o.vault)||"null"],u=(0,b.ok)(l,"AARBelowCircuitBreakerLineTime"),d=2==r&&l&&((0,b.ok)(l,"aar")>=(0,b.ok)(l,"AARC")||BigInt(new Date().getTime()/1e3)-u>=t);n[o.vault]=d}}),n}(Q,Z,J);P.forEach((e,t)=>{var a,n,o;let s=(0,b.ok)(X,[t,"result"]),l=(0,b.ok)(q,[t,"result"]),u=(0,b.ok)(V[e.assetTokenSymbol],[0]),d=(0,b.ok)(V[e.assetTokenSymbol],[1]);$[e.vault]=l;let i=d>0n?u*r.Pq/10n**d:0n;j[e.assetTokenSymbol]=i;let c=(0,b.ok)(N,e.xTokenSymbol),m=c>0n&&s>0n&&i>0n&&l>0n&&s*i>l*r.Pq?(s*i-l*r.Pq)/c:0n;c>0n&&s>0n&&i>0n&&l>0n&&r.Pq,j[e.xTokenSymbol]=m,z[e.assetTokenSymbol]=s;let p=(0,y.b)((0,b.ok)(F,[t,"result"]),parseInt((0,b.ok)(K,[t,"result"]).toString()));L[e.vault]=parseFloat(p),L[e.assetTokenSymbol]=L[e.vault],J[e.vault]=(null==U?void 0:null===(a=U[t])||void 0===a?void 0:a.result)||0,J[e.assetTokenSymbol]=J[e.vault],e.isStable?(Z[e.vault]=proxyGetDef({settingsDecimals:10n,...null==O?void 0:null===(n=O[t])||void 0===n?void 0:n.result,Y:(0,b.ok)(H,[t,"result"])},0n),Z[e.assetTokenSymbol]=Z[e.vault]):(Q[e.vault]=proxyGetDef({settingsDecimals:10n,...null==O?void 0:null===(o=O[t])||void 0===o?void 0:o.result,Y:(0,b.ok)(H,[t,"result"])},0n),Q[e.assetTokenSymbol]=Q[e.vault])});let et=function(){let{address:e}=(0,d.mA)(),t=(0,p.usePathname)(),a=l.iK[(0,s.BV)()],n=(0,u.useMemo)(()=>a.filter(e=>!e.isStable&&e.ptyPoolAboveAddress&&e.ptyPoolBelowAddress).map(e=>[{poolAddress:e.ptyPoolBelowAddress,stakeSymbol:"USB",matchSymbol:e.assetTokenSymbol,earnSymbol:e.xTokenSymbol,earnForMatchSymbol:e.assetTokenSymbol},{poolAddress:e.ptyPoolAboveAddress,stakeSymbol:e.assetTokenSymbol,matchSymbol:"USB",earnSymbol:e.assetTokenSymbol,earnForMatchSymbol:e.xTokenSymbol}]).flat(),a),{data:r}=(0,m.uX)({watch:!0,enabled:!!e&&"/earn"==t,contracts:[...n.map(t=>{let{poolAddress:a}=t;return{abi:o.aT,address:a,functionName:"userStakingBalance",args:[e]}}),...n.map(t=>{let{poolAddress:a}=t;return{abi:o.aT,address:a,functionName:"earnedMatchedToken",args:[e]}}),...n.map(t=>{let{poolAddress:a}=t;return{abi:o.aT,address:a,functionName:"earnedStakingYields",args:[e]}}),...n.map(t=>{let{poolAddress:a}=t;return{abi:o.aT,address:a,functionName:"earnedMatchingYields",args:[e]}}),...n.map(e=>{let{poolAddress:t}=e;return{abi:o.aT,address:t,functionName:"totalStakingBalance"}})]}),i=(0,u.useMemo)(()=>proxyGetDef({},proxyGetDef({},0n)),[]);return n.forEach((e,t)=>{let{poolAddress:a,stakeSymbol:o,matchSymbol:s,earnSymbol:l}=e,u=(0,b.ok)(r,[t,"result"]),d=(0,b.ok)(r,[t+n.length,"result"]),c=(0,b.ok)(r,[t+2*n.length,"result"]),m=(0,b.ok)(r,[t+3*n.length,"result"]),p=(0,b.ok)(r,[t+4*n.length,"result"]);i[a]={stakeSymbol:o,matchSymbol:s,earnSymbol:l,stake:u,match:d,earn:c,earnForMatch:m,totalStake:p}}),i}();return(0,n.jsx)(k.Provider,{value:{balances:w,totalSupplies:N,prices:j,assetLocked:z,aar:L,vaultUSBTotal:$,vaultsMode:J,vaultsDiscount:ee,vaultsState:Q,stableVaultsState:Z,earns:et},children:t})}}}]);